var ImageCropper=function(){"use strict";function e(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?null:arguments[3],o=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],r=o?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return i&&i.appendChild(r),console.log("appending !"),t&&(r.className=Array.isArray(t)?t.join(" "):t),Object.keys(n||{}).forEach(function(e){return r.setAttribute(e,n[e])}),r}var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},c=Object.freeze([function(e,t,n){var i=t.x.x;c[7](e,t,n),n.fixed_size?t.y+t.x-i<0?(t.x=i-t.y,t.y=0):t.y+=t.x-i:c[4](e,t,n)},function(e,t,n){var i=t.x2;c[5](e,t,n),n.fixed_size?t.y-t.x2+i<0?(t.x2=i+t.y,t.y=0):t.y-=t.x2-i:c[4](e,t,n)},function(e,t,n,i){var o=t.x2;if(c[5](e,t,n),n.fixed_size){var r=i.getBoundingClientRect();t.y2+t.x2-o>r.height?(t.x2=o+(r.height-t.y2),t.y2=r.height):t.y2+=t.x2-o}else c[6](e,t,n)},function(e,t,n,i){var o=t.x;if(c[7](e,t,n),n.fixed_size){var r=i.getBoundingClientRect();t.y2+(o-t.x)>r.height?(t.x=o-(r.height-t.y2),t.y2=r.height):t.y2-=t.x-o}else c[6](e,t,n)},function(e,t,n){return t.y=t.y2-e.y<n.min_crop_height?t.y2-n.min_crop_height:e.y},function(e,t,n){return t.x2=e.x-t.x<n.min_crop_width?t.x+n.min_crop_width:e.x},function(e,t,n){return t.y2=e.y-t.y<n.min_crop_height?t.y+n.min_crop_height:e.y},function(e,t,n){return t.x=t.x2-e.x<n.min_crop_width?t.x2-n.min_crop_width:e.x}]),a=function(){function i(n){t(this,i),this.$$view=e.apply(void 0,r(n)),this.$$view.addEventListener("DOMNodeRemovedFromDocument",this.destroy)}return n(i,[{key:"destroy",value:function(){}}]),i}(),u=function(e){function n(e,i){var r;t(this,n);var c=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,["div",["imgc-content"],{},e])),a=new Image;return a.addEventListener("load",function(){return c.$$view.dispatchEvent(new CustomEvent("imageFetched",{detail:a}))}),console.log(c.$$view),a.src=i,c.$$view.appendChild(a),r=c.$$view,o(c,r)}return i(n,e),n}(a),l=Object.seal({$$parent:null,$$initialized:!1,meta:{dimensions:{},img:null,ratio:{w:1,h:1}},components:{content:null,handles:null,overlay:null},options:{update_cb:function(){},create_cb:function(){},destroy_cb:function(){},min_crop_width:32,min_crop_height:32,max_width:500,max_height:500,fixed_size:!1,mode:"square"}}),s=function(){function e(n){var i=this,o=arguments.length<=1||void 0===arguments[1]?"http://thecatapi.com/api/images/get":arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];t(this,e),o&&n&&(Object.keys(r||{}).forEach(function(e){return l.options[e]=r[e]}),l.$$parent=document.querySelector(n),l.$$parent.classList.add("imgc"),console.log("executing ctor : imagecropper"),new u(l.$$parent,o).addEventListener("imageFetched",function(e){console.log("image fetched",e),l.meta.img=e.detail,i.create()}))}return n(e,[{key:"create",value:function(){l.$$initialized||(l.$$initialized=!0)}},{key:"destroy",value:function(){l.$$initialized&&(console.log("destroying"),l.$$initialized=!1)}},{key:"crop",value:function(){console.log("cropping !")}}]),e}();return s}();
